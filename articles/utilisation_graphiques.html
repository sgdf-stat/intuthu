<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Éléments graphiques • intuthu</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Éléments graphiques">
<meta property="og:description" content="intuthu">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">intuthu</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/utilisation_cartes.html">Réaliser des cartes sur les zonages SGDF</a>
    </li>
    <li>
      <a href="../articles/utilisation_graphiques.html">Éléments graphiques</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sgdf-stat/intuthu/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="utilisation_graphiques_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Éléments graphiques</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sgdf-stat/intuthu/blob/master/vignettes/utilisation_graphiques.Rmd"><code>vignettes/utilisation_graphiques.Rmd</code></a></small>
      <div class="hidden name"><code>utilisation_graphiques.Rmd</code></div>

    </div>

    
    
<p>L’unité graphique et la forme sont des éléments importants lorsque l’on souhaite communiquer des chiffres. Les SGDF possèdent une charte graphique forte et puissante (<a href="https://www.sgdf.fr/vos-ressources/doc-en-stock/category/147-elements-graphiques" class="uri">https://www.sgdf.fr/vos-ressources/doc-en-stock/category/147-elements-graphiques</a>). L’utiliser dans les analyses statistiques permet ainsi d’apporter de la cohérence et du style aux résultats.</p>
<p>Un certain nombre de fonctions ont été définies pour faciliter ce travail d’utilisation de la charte graphique.</p>
<div id="palettes" class="section level2">
<h2 class="hasAnchor">
<a href="#palettes" class="anchor"></a>Palettes</h2>
<p>Les couleurs principales de la charte ont été incluses dans les palettes. Des déclinaisons continues sont aussi proposées pour des analyses qui le demandent.</p>
<p>Les couleurs sont interpolées dans des échelles (<code>scale</code>) de façon à pouvoir remplir un grand nombre de valeurs. On peut aussi y accéder individuellement au travers de la fonction <code><a href="../reference/sgdf_colors.html">sgdf_colors()</a></code>. Les couleurs de la charte sont suffixées par "_1". Les autres suffixes correspondent à des teintes différentes.</p>
</div>
<div id="réaliser-un-graphique" class="section level2">
<h2 class="hasAnchor">
<a href="#r%C3%A9aliser-un-graphique" class="anchor"></a>Réaliser un graphique</h2>
<p>Les graphiques sont faits avec <code>ggplot2</code> et les packages correspondants. Pour des versions interactives, on peut se tourner vers <code>ggiraph</code> ou <code>plotly</code> selon les besoins.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">intuthu</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)</pre></body></html></div>
<div id="thème" class="section level3">
<h3 class="hasAnchor">
<a href="#th%C3%A8me" class="anchor"></a>Thème</h3>
<p>La première étape est d’ajouter un thème au moyen de <code><a href="../reference/theme_sgdf.html">theme_sgdf()</a></code> ou <code><a href="../reference/theme_sgdf_carte.html">theme_sgdf_carte()</a></code> pour les cartes. On peut régler la taille des lignes de la grille par le paramètre <code>base_line_size</code> (voire les supprimer en le passant à 0).</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">graph_iris</span> <span class="kw">&lt;-</span> <span class="fu">ggplot</span>(<span class="no">iris</span>) +
  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">Sepal.Width</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">Petal.Length</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">Species</span>),
             <span class="kw">size</span> <span class="kw">=</span> <span class="fl">1.5</span>) +
  <span class="fu">labs</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Iris"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"Croisement des points"</span>,
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Jeu de données Iris"</span>) +
  <span class="fu"><a href="../reference/theme_sgdf.html">theme_sgdf</a></span>(<span class="kw">base_line_size</span> <span class="kw">=</span> <span class="fl">0.5</span>)

<span class="no">graph_iris</span></pre></body></html></div>
</div>
<div id="couleurs" class="section level3">
<h3 class="hasAnchor">
<a href="#couleurs" class="anchor"></a>Couleurs</h3>
<p>On ajoute ensuite les couleurs au moyen des échelles : <code><a href="../reference/scale_color_sgdf_discrete.html">scale_color_sgdf_discrete()</a></code>. Des versions avec <code>fill</code> ou en continu avec <code>continuous</code> sont aussi proposées. On peut inverser si besoin avec <code>reverse = TRUE</code> ou changer de palette avec <code>palette</code>. On doit dans ce dernier cas fournir une des palettes SGDF pré-construites.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">graph_iris</span> <span class="kw">&lt;-</span> <span class="no">graph_iris</span> +
  <span class="fu"><a href="../reference/scale_color_sgdf_discrete.html">scale_color_sgdf_discrete</a></span>()</pre></body></html></div>
</div>
<div id="polices" class="section level3">
<h3 class="hasAnchor">
<a href="#polices" class="anchor"></a>Polices</h3>
<p>Lorsqu’on ajoute des éléments de texte, on doit en préciser la police (Sarabun). Dans le thème, cela est déjà fait par défaut.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu">as_tibble</span>(<span class="no">mtcars</span>) <span class="kw">%&gt;%</span>
  <span class="fu">bind_cols</span>(<span class="kw">car</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span>(<span class="no">mtcars</span>)) <span class="kw">%&gt;%</span>
  <span class="fu">ggplot</span>(<span class="fu">aes</span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="no">mpg</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="no">disp</span>,
    <span class="kw">color</span> <span class="kw">=</span> <span class="no">hp</span>,
    <span class="kw">label</span> <span class="kw">=</span> <span class="no">car</span>
  )) +
  <span class="fu">geom_text</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">3.5</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="st">"Sarabun"</span>) +
  <span class="fu"><a href="../reference/scale_color_sgdf_continuous.html">scale_color_sgdf_continuous</a></span>(<span class="kw">palette</span> <span class="kw">=</span> <span class="st">"pal_sgdf_rouge_pk"</span>, <span class="kw">reverse</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="../reference/theme_sgdf.html">theme_sgdf</a></span>(<span class="kw">base_line_size</span> <span class="kw">=</span> <span class="fl">0.5</span>)</pre></body></html></div>
<blockquote>
<p>Ces polices sont disponibles sur Google Fonts et <strong>doivent être installées en amont</strong> pour pouvoir être utilisées. Pour les documents HTML, la dépendance est ajoutée automatiquement :</p>
<ul>
<li>
<a href="https://fonts.google.com/specimen/Sarabun" class="uri">https://fonts.google.com/specimen/Sarabun</a> ;</li>
<li>
<a href="https://fonts.google.com/specimen/Caveat+Brush" class="uri">https://fonts.google.com/specimen/Caveat+Brush</a> ;</li>
<li>
<a href="https://fonts.google.com/specimen/Raleway" class="uri">https://fonts.google.com/specimen/Raleway</a>.</li>
</ul>
</blockquote>
</div>
<div id="export" class="section level3">
<h3 class="hasAnchor">
<a href="#export" class="anchor"></a>Export</h3>
<p>Deux cas de figures se présentent pour l’export :</p>
<ul>
<li>soit le graphique est intégré dans un document et on se contente de le mettre directement dans le code du <code>rmarkdown</code>, dans un chunk spécifique. Ou alors on l’exporte avec <code>ggsave</code> pour d’autres types de documents.</li>
<li>soit il a pour but d’être présenté seul et il est nécessaire de rajouter le logo avant d’exporter. On utilise alors la fonction <code>ajout_logo_sgdf</code> comme suit, en précisant si besoin avec l’argument <code>type</code> quel logo utiliser :</li>
</ul>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/ajout_logo_sgdf.html">ajout_logo_sgdf</a></span>(<span class="no">graph_iris</span>)</pre></body></html></div>
</div>
</div>
<div id="faire-un-tableau" class="section level2">
<h2 class="hasAnchor">
<a href="#faire-un-tableau" class="anchor"></a>Faire un tableau</h2>
<p>Un tableau vaut parfois mieux qu’un graphique. Il faut toutefois ne pas y mettre trop d’informations (sinon privilégier un export Excel).</p>
<div id="personnalisation-des-tableaux-statiques" class="section level3">
<h3 class="hasAnchor">
<a href="#personnalisation-des-tableaux-statiques" class="anchor"></a>Personnalisation des tableaux statiques</h3>
<p>Les tableaux dits “statiques”, destinés à une impression ou à une vue figée sont construits avec <code>flextable</code> (<a href="https://davidgohel.github.io/flextable/index.html" class="uri">https://davidgohel.github.io/flextable/index.html</a>), qui permet d’enchaîner les opérations. La fonction <code><a href="../reference/theme_flex_sgdf.html">theme_flex_sgdf()</a></code> permet d’ajouter un thème propre aux SGDF.</p>
<p>Pour les exports HTML, utiliser <code><a href="https://rdrr.io/pkg/flextable/man/autofit.html">autofit()</a></code> à la fin pour ajuster les auteurs.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">flextable</span>)

<span class="co"># jeu de données</span>
<span class="no">titanic_10</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu">as_tibble</span>(<span class="no">Titanic</span>), <span class="fl">10</span>)

<span class="co"># tableau</span>
<span class="fu"><a href="https://rdrr.io/pkg/flextable/man/flextable.html">flextable</a></span>(<span class="no">titanic_10</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/theme_flex_sgdf.html">theme_flex_sgdf</a></span>()</pre></body></html></div>
<p>On peut aussi ajouter le logo pour les exports, <em>modulo</em> le passage au format image avec <code>passage_gt_img()</code> (et donc l’utilisation de <code>ggsave()</code> pour les sauvegardes) :</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/flextable/man/flextable.html">flextable</a></span>(<span class="no">titanic_10</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/theme_flex_sgdf.html">theme_flex_sgdf</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/passage_flex_img.html">passage_flex_img</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/ajout_logo_sgdf.html">ajout_logo_sgdf</a></span>()</pre></body></html></div>
</div>
<div id="personnalisation-des-tableaux-dynamiques" class="section level3">
<h3 class="hasAnchor">
<a href="#personnalisation-des-tableaux-dynamiques" class="anchor"></a>Personnalisation des tableaux dynamiques</h3>
<p>Pour les tableaux dynamiques, sur un format web (un tableau de bord par exemple), on préferera <code>reactable</code> (<a href="https://glin.github.io/reactable/index.html" class="uri">https://glin.github.io/reactable/index.html</a>). La personnalisation du thème se fait directement dans le fichier CSS associé.</p>
<p>Ce package est très puissant et permet de réaliser sans serveur des opérations de tri, des graphiques légèrement interactifs, des recherches dans des tableaux, etc. Le coût d’entrée peut cependant être élevé et le passage par du JavaScript rend parfois la reproductibilité difficile.</p>
</div>
</div>
<div id="pictogrammes" class="section level2">
<h2 class="hasAnchor">
<a href="#pictogrammes" class="anchor"></a>Pictogrammes</h2>
<p>La nouvelle charte graphique fait une grande utilisation des pictogrammes. La fonction <code><a href="../reference/picto.html">picto()</a></code> permet de les charger, de les coloriser et de les mettre à l’échelle facilement.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/picto.html">picto</a></span>(<span class="st">"feuille"</span>, <span class="kw">couleur</span> <span class="kw">=</span> <span class="st">"vert_farfa"</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="st">"80"</span>)</pre></body></html></div>
<p>La liste des picto est la suivante :</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Thomas Vroylandt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
